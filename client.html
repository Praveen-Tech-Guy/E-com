<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SHAH APPLIANCES | Premium Electronics</title>
  <!-- Modern Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  
  <style>
    :root{
      /* Modern Color Palette */
      --bg: #f8fafc; /* Slate 50 */
      --card: #ffffff;
      --ink: #0f172a; /* Slate 900 */
      --muted: #64748b; /* Slate 500 */
      --border: #e2e8f0; /* Slate 200 */
      
      --brand: #ff9900; /* Amazon Orange style */
      --brand-hover: #e68a00;
      --brand-text: #fff;
      
      --bar: #131921; /* Deep Dark Blue */
      
      --success: #22c55e;
      --danger: #ef4444;
      
      --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
      --shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
      --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
      --radius: 12px;
    }

    *{box-sizing:border-box}
    
    body{
      margin:0;
      font-family: 'Inter', system-ui, -apple-system, sans-serif;
      background: var(--bg);
      color: var(--ink);
      line-height: 1.5;
      -webkit-font-smoothing: antialiased;
    }

    button, input, select, textarea { font-family: inherit; }

    /* --- Transitions --- */
    .fade-in { animation: fadeIn 0.3s ease-in; }
    @keyframes fadeIn { from{opacity:0; transform:translateY(10px)} to{opacity:1; transform:translateY(0)} }

    /* --- Header --- */
    header{
      position: sticky; top:0; z-index: 100;
      background: var(--bar);
      box-shadow: var(--shadow);
      padding: 12px 0;
    }
    
    .container { max-width: 1200px; margin: 0 auto; padding: 0 16px; }
    
    .header-inner {
      display: flex; align-items: center; justify-content: space-between; gap: 20px;
    }

    .logo{
      display: flex; align-items: center; gap: 10px;
      color: white; font-weight: 800; font-size: 22px; 
      text-decoration: none; letter-spacing: -0.5px;
    }
    
    .search-bar{
      flex: 1; max-width: 600px;
      display: flex; background: white;
      border-radius: 8px; overflow: hidden;
      transition: box-shadow 0.2s;
    }
    .search-bar:focus-within { box-shadow: 0 0 0 3px rgba(255,153,0,0.5); }

    .search-bar input{
      flex:1; border:none; padding: 12px 16px; outline: none; font-size: 15px;
    }
    .search-bar button{
      background: var(--brand); color: var(--brand-text);
      border:none; padding: 0 20px; font-weight: 600; cursor: pointer;
    }

    .cart-btn{
      background: transparent; color: white; border: 1px solid rgba(255,255,255,0.2);
      padding: 10px 16px; border-radius: 8px; cursor: pointer;
      position: relative; font-weight: 600; display: flex; align-items: center; gap: 8px;
      transition: 0.2s;
    }
    .cart-btn:hover { background: rgba(255,255,255,0.1); border-color: white; }
    
    .cart-badge{
      background: var(--brand); color: var(--ink);
      font-size: 12px; font-weight: 800;
      padding: 2px 8px; border-radius: 10px;
      min-width: 20px; text-align: center;
    }

    /* --- Mobile Search layout fix --- */
    @media(max-width: 640px) {
      .header-inner { flex-wrap: wrap; }
      .search-bar { order: 3; width: 100%; max-width: 100%; min-width: 100%; margin-top: 10px; }
    }

    /* --- Main Layout --- */
    main { padding-bottom: 80px; } /* Space for footer */

    /* Hero Banner */
    .hero {
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
      color: white;
      padding: 40px 20px;
      text-align: center;
      border-radius: 0 0 var(--radius) var(--radius);
      margin-bottom: 30px;
      box-shadow: var(--shadow-lg);
    }
    .hero h1 { margin: 0 0 10px 0; font-size: 28px; }
    .hero p { color: #94a3b8; margin: 0; }

    /* Category Pills (Replaces Select) */
    .cat-scroll {
      display: flex; gap: 10px; overflow-x: auto; padding-bottom: 15px;
      scrollbar-width: none;
    }
    .cat-scroll::-webkit-scrollbar { display: none; }
    .cat-pill {
      background: white; border: 1px solid var(--border);
      padding: 8px 16px; border-radius: 50px; font-size: 14px; font-weight: 500;
      white-space: nowrap; cursor: pointer; transition: 0.2s; user-select: none;
    }
    .cat-pill:hover, .cat-pill.active {
      background: var(--ink); color: white; border-color: var(--ink); transform: translateY(-2px);
    }

    /* Filters & Layout */
    .section { display: none; }
    .section.active { display: block; animation: fadeIn 0.4s; }

    .toolbar {
      display: flex; gap: 10px; flex-wrap: wrap; margin: 20px 0;
      background: white; padding: 16px; border-radius: var(--radius);
      border: 1px solid var(--border); box-shadow: var(--shadow-sm);
    }
    .input-group { display: flex; gap: 10px; flex: 1; }
    
    .input {
      width: 100%; padding: 12px; border: 1px solid var(--border);
      border-radius: 8px; outline: none; font-size: 14px; transition: 0.2s;
    }
    .input:focus { border-color: var(--brand); box-shadow: 0 0 0 3px rgba(255,153,0,0.15); }

    /* --- Product Grid --- */
    .grid {
      display: grid; gap: 24px;
      grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
    }

    .card {
      background: white; border-radius: var(--radius);
      border: 1px solid var(--border);
      overflow: hidden; display: flex; flex-direction: column;
      transition: transform 0.3s, box-shadow 0.3s;
      position: relative;
    }
    
    .card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-lg);
      border-color: var(--brand);
    }

    .card img {
      width: 100%; height: 220px; object-fit: contain;
      padding: 20px; background: #fff;
      border-bottom: 1px solid var(--bg);
    }

    .card-body { padding: 16px; flex: 1; display: flex; flex-direction: column; gap: 6px; }

    .badge { 
      display: inline-block; background: var(--bg); color: var(--muted);
      font-size: 11px; font-weight: 700; text-transform: uppercase;
      padding: 4px 8px; border-radius: 4px; align-self: flex-start;
    }

    .title { font-size: 16px; font-weight: 700; margin: 0; color: var(--ink); display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;}
    
    .price-row { 
      margin-top: auto; padding-top: 12px; display: flex; justify-content: space-between; align-items: flex-end;
    }
    .curr-price { font-size: 18px; font-weight: 800; color: var(--ink); }
    .old-price { text-decoration: line-through; font-size: 13px; color: var(--muted); margin-left: 6px; }

    .stars { color: #fbbf24; font-size: 14px; margin-top: 4px; }

    .card-footer {
      padding: 12px 16px; border-top: 1px solid var(--bg);
      display: grid; grid-template-columns: 1fr 1fr; gap: 10px;
      background: #f9fafb;
    }

    /* Buttons */
    .btn {
      display: inline-flex; align-items: center; justify-content: center; gap: 8px;
      padding: 10px 20px; border-radius: 8px; font-weight: 600; font-size: 14px;
      cursor: pointer; transition: 0.2s; border: 1px solid var(--border);
      background: white; color: var(--ink); text-decoration: none;
    }
    .btn:active { transform: scale(0.98); }
    
    .btn.brand { background: var(--brand); color: var(--brand-text); border-color: transparent; box-shadow: 0 2px 4px rgba(255,153,0,0.3); }
    .btn.brand:hover { background: var(--brand-hover); }
    
    .btn.outline { background: transparent; border-color: var(--ink); }
    .btn.outline:hover { background: var(--ink); color: white; }
    
    .btn.danger { background: #fee2e2; color: var(--danger); border-color: #fca5a5; }
    .btn.block { width: 100%; display: flex; }

    /* --- Product Detail View --- */
    .pv-container {
      background: white; border-radius: var(--radius);
      box-shadow: var(--shadow); border: 1px solid var(--border);
      overflow: hidden;
    }
    
    .pv-grid {
      display: grid; grid-template-columns: 1.2fr 1fr; 
      min-height: 500px;
    }
    @media(max-width: 768px) { .pv-grid{ grid-template-columns: 1fr; } }

    .pv-gallery {
      background: #f1f5f9; padding: 30px; display: flex; flex-direction: column;
      align-items: center; justify-content: center; gap: 20px; border-right: 1px solid var(--border);
    }
    .pv-main-img { width: 100%; max-width: 400px; height: auto; object-fit: contain; mix-blend-mode: multiply;}
    
    .pv-thumbs { display: flex; gap: 10px; flex-wrap: wrap; justify-content: center;}
    .pv-thumb { 
      width: 60px; height: 60px; border: 2px solid transparent; border-radius: 8px;
      cursor: pointer; object-fit: cover; background: white;
    }
    .pv-thumb:hover, .pv-thumb.active { border-color: var(--brand); }

    .pv-info { padding: 30px; display: flex; flex-direction: column; gap: 16px; }
    
    .pv-meta { padding-bottom: 16px; border-bottom: 1px solid var(--border); }
    .pv-price-box { font-size: 28px; font-weight: 800; color: var(--ink); margin: 10px 0; }
    
    .qty-wrap {
      display: inline-flex; align-items: center; border: 1px solid var(--border); border-radius: 8px; overflow: hidden;
    }
    .qty-btn { width: 40px; height: 40px; background: #f8fafc; border: none; font-size: 18px; cursor: pointer; transition: 0.2s;}
    .qty-btn:hover { background: #e2e8f0; }
    .qty-input { width: 50px; border: none; text-align: center; font-weight: 700; }

    /* --- Cart & Checkout Layout --- */
    .cart-layout {
      display: grid; grid-template-columns: 2fr 1fr; gap: 24px;
    }
    @media(max-width: 800px) { .cart-layout { grid-template-columns: 1fr; } }

    .panel {
      background: white; border-radius: var(--radius);
      border: 1px solid var(--border); padding: 20px;
    }
    
    .cart-item {
      display: grid; grid-template-columns: 80px 1fr auto; gap: 16px;
      padding: 16px 0; border-bottom: 1px solid var(--bg);
    }
    .cart-item:last-child { border-bottom: none; }
    .cart-item img { width: 80px; height: 80px; object-fit: contain; border: 1px solid var(--border); border-radius: 8px; padding: 4px; }

    .bill-row { display: flex; justify-content: space-between; margin-bottom: 12px; font-size: 14px; color: var(--muted); }
    .bill-row.total { 
      border-top: 2px dashed var(--border); padding-top: 16px; 
      font-size: 20px; font-weight: 800; color: var(--ink); margin-top: 16px;
    }

    /* --- Footer --- */
    .app-footer {
      margin-top: 60px; padding: 40px 0; background: white; border-top: 1px solid var(--border); text-align: center; color: var(--muted);
    }
    .footer-links { margin-bottom: 20px; display: flex; justify-content: center; gap: 20px; font-weight: 500;}
    .footer-links a { color: var(--ink); text-decoration: none; }
    .socials { display: flex; justify-content: center; gap: 15px; font-size: 24px; margin-bottom: 20px; }

    /* --- Floating --- */
    .float-dock {
      position: fixed; bottom: 24px; right: 24px;
      display: flex; flex-direction: column; gap: 12px; z-index: 200;
    }
    .fab {
      width: 56px; height: 56px; border-radius: 50%; color: white;
      display: flex; align-items: center; justify-content: center;
      text-decoration: none; box-shadow: 0 8px 20px rgba(0,0,0,0.25);
      font-size: 24px; transition: transform 0.2s;
    }
    .fab:hover { transform: scale(1.1); }
    
    /* --- Toast Notification --- */
    #toast-box { position: fixed; top: 80px; right: 20px; z-index: 1000; display: flex; flex-direction: column; gap: 10px;}
    .toast { 
      background: #0f172a; color: white; padding: 12px 20px; border-radius: 8px;
      display: flex; align-items: center; gap: 10px; box-shadow: var(--shadow-lg);
      animation: slideIn 0.3s; font-size: 14px;
    }
    @keyframes slideIn { from{transform: translateX(100%); opacity: 0} to {transform: translateX(0); opacity: 1}}

  </style>
</head>
<body>

  <!-- Navigation -->
  <header>
    <div class="container header-inner">
      <a href="#" onclick="location.reload()" class="logo">
        <!-- Improved Logo SVG -->
        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="#ff9900" viewBox="0 0 24 24"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
        SHAH APPLIANCES
      </a>
      
      <div class="search-bar">
        <input id="search" type="search" placeholder="Search smartphones, audio, laptops...">
        <button id="searchBtn"><svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24"><path d="M21.71 20.29l-3.38-3.38A7.92 7.92 0 0020 12a8 8 0 10-8 8 7.92 7.92 0 004.91-1.69l3.38 3.38a1 1 0 001.42-1.42zM4 12a6 6 0 116 6 6.007 6.007 0 01-6-6z"/></svg></button>
      </div>

      <button id="openCart" class="cart-btn">
        <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"/></svg>
        Cart <span id="cart-count" class="cart-badge">0</span>
      </button>
    </div>
  </header>

  <!-- Page Wrapper -->
  <main class="container" style="margin-top: 24px;">
    
    <!-- Toast Container -->
    <div id="toast-box"></div>

    <!-- SECTION: HOME -->
    <section id="home" class="section active">
      
      <!-- Promotional Banner -->
      <div class="hero">
        <h1>The Electronics Festival</h1>
        <p>Get instant delivery and best prices on premium gadgets.</p>
      </div>

      <!-- Quick Toolbar -->
      <div class="toolbar">
        <!-- Horizontal Scrollable Categories -->
        <div style="width: 100%; overflow: hidden; padding-bottom: 4px;">
          <div class="cat-scroll" id="cat-scroll">
            <!-- JS injected pills -->
            <div class="cat-pill active" data-cat="All">All</div>
            <div class="cat-pill" data-cat="Mobiles">Mobiles</div>
            <div class="cat-pill" data-cat="Laptops">Laptops</div>
            <div class="cat-pill" data-cat="Tablets">Tablets</div>
            <div class="cat-pill" data-cat="Audio">Audio</div>
            <div class="cat-pill" data-cat="TV">Televisions</div>
            <div class="cat-pill" data-cat="Cameras">Cameras</div>
          </div>
        </div>

        <!-- Price Filters -->
        <div class="input-group" style="border-top: 1px solid #f1f5f9; padding-top: 10px; margin-top: 6px;">
          <input id="f-min" class="input" type="number" placeholder="Min Price ‚Çπ">
          <input id="f-max" class="input" type="number" placeholder="Max Price ‚Çπ">
          <button id="f-reset" class="btn outline">Clear</button>
        </div>
      </div>

      <!-- Product Grid -->
      <div id="product-list" class="grid fade-in">
        <!-- Products injected here -->
      </div>
    </section>

    <!-- SECTION: PRODUCT DETAIL -->
    <section id="product-view" class="section">
      <button class="btn outline" onclick="showSection('home')" style="margin-bottom: 16px;">
        <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24" style="transform: rotate(180deg); margin-right:4px"><path d="M21 12l-18 0m9-7l9 7l-9 7"/></svg> Back
      </button>

      <div class="pv-container fade-in">
        <div class="pv-grid">
          <!-- Image Gallery -->
          <div class="pv-gallery">
            <img id="pv-main" class="pv-main-img" src="" alt="Main">
            <div id="pv-thumbs" class="pv-thumbs"></div>
          </div>
          
          <!-- Info -->
          <div class="pv-info">
            <div class="pv-meta">
              <span class="badge" id="pv-cat">Category</span>
              <h1 class="title" id="pv-title" style="font-size: 26px; margin-top: 8px;">Title</h1>
              <div class="muted" style="font-size: 14px;" id="pv-brand">Brand</div>
              <div id="pv-stars" class="stars" style="font-size: 18px; margin-top: 6px;"></div>
            </div>
            
            <div style="flex:1">
              <div class="pv-price-box">‚Çπ<span id="pv-price"></span></div>
              <p style="color: var(--muted); line-height: 1.6;" id="pv-desc"></p>
            </div>

            <div style="border-top: 1px solid var(--border); padding-top: 20px; display:flex; flex-direction: column; gap: 12px;">
               <div style="display: flex; align-items: center; gap: 15px;">
                  <div class="qty-wrap">
                    <button class="qty-btn" id="pv-minus">‚àí</button>
                    <input id="pv-qty" class="qty-input" type="number" value="1" readonly>
                    <button class="qty-btn" id="pv-plus">+</button>
                  </div>
                  <div style="color: #22c55e; font-size: 13px; font-weight: 600;">‚óè In Stock</div>
               </div>

               <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                 <button id="pv-add" class="btn brand block" style="height: 48px; font-size: 16px;">Add to Cart</button>
                 <button id="pv-wa" class="btn outline block" style="border-color:#25D366; color: #25D366; font-weight:700">Buy on WhatsApp</button>
               </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- SECTION: CART -->
    <section id="cart" class="section">
      <button class="btn outline" onclick="showSection('home')" style="margin-bottom: 20px;">‚Üê Back to Shop</button>
      
      <h2 style="margin:0 0 20px 0; font-size: 28px; letter-spacing:-0.5px;">Checkout</h2>

      <div class="cart-layout fade-in">
        <!-- Cart Items List -->
        <div>
          <div class="panel">
             <div style="display: flex; justify-content:space-between; align-items: center; border-bottom: 1px solid var(--border); padding-bottom: 10px; margin-bottom: 10px;">
               <h3 style="margin:0;">Your Cart</h3>
               <button id="clearCart" class="btn danger" style="padding: 4px 12px; font-size: 12px;">Clear</button>
             </div>
             <div id="cart-items"></div>
          </div>

          <div class="panel" style="margin-top: 24px;">
            <h3 style="margin-top:0">Delivery Details</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 12px;">
              <input id="a-name" class="input" placeholder="Full Name">
              <input id="a-phone" class="input" placeholder="Phone Number (10-digits)" type="number">
            </div>
            <textarea id="a-addr" class="input" placeholder="Delivery Address (House no, Street, City, Pincode)" rows="3"></textarea>
            
            <div style="display: flex; gap: 10px; align-items: center; margin-top: 12px;">
              <button id="shareLocation" class="btn outline">
                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="margin-right:5px"><path d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/><path d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/></svg> 
                Pin Location
              </button>
              <input id="locPreview" class="input" placeholder="Location Status..." readonly style="background:#f8fafc; border: none;">
            </div>
          </div>
        </div>

        <!-- Order Summary -->
        <div>
           <div class="panel" style="position: sticky; top: 90px;">
             <h3 style="margin-top:0; font-size: 18px;">Order Summary</h3>
             
             <div class="bill-row"><span>Subtotal</span><span style="font-weight:600; color:var(--ink)">‚Çπ<span id="b-sub">0</span></span></div>
             <div class="bill-row"><span>Shipping</span><span style="font-weight:600; color:var(--ink)">‚Çπ<span id="b-ship">0</span></span></div>
             <div class="bill-row"><span>Tax (10%)</span><span style="font-weight:600; color:var(--ink)">‚Çπ<span id="b-tax">0</span></span></div>
             <div class="bill-row"><span>Discount</span><span style="color:#22c55e; font-weight:600">‚àí ‚Çπ<span id="b-disc">0</span></span></div>
             
             <div style="display: flex; gap:8px; margin-top: 12px;">
               <input id="coupon" class="input" placeholder="CODE: SAVE10" style="text-transform:uppercase">
               <button id="applyCoupon" class="btn outline">Apply</button>
             </div>

             <div class="bill-row total"><span>To Pay</span><span>‚Çπ<span id="b-total">0</span></span></div>

             <button id="placeOrder" class="btn brand block" style="margin-top: 20px; padding: 14px;">Confirm & Order via WhatsApp</button>
             
             <div style="text-align:center; margin-top: 16px; font-size: 12px; color: var(--muted);">
               <svg width="12" height="12" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2a10 10 0 100 20 10 10 0 000-20zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg> 
               100% Secure Checkout
             </div>
           </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="app-footer">
      <div class="container">
        <div class="socials">
          <a href="#" style="color:#3b5998">Fb</a>
          <a href="#" style="color:#E1306C">In</a>
          <a href="#" style="color:#1DA1F2">Tw</a>
        </div>
        <div class="footer-links">
          <a href="#">Privacy Policy</a>
          <a href="#">Terms of Service</a>
          <a href="#">Support</a>
        </div>
        <p>&copy; 2024 Shah Appliances. All rights reserved.</p>
      </div>
    </footer>
  </main>

  <!-- Floating Buttons -->
  <div class="float-dock">
    <a class="fab" style="background:#25D366" href="https://wa.me/7028115061" target="_blank">
      <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="white" viewBox="0 0 24 24"><path d="M.057 24l1.687-6.163a11.946 11.946 0 0 1-1.62-6.003C.122 5.373 5.495 0 12.057 0c3.178 0 6.167 1.24 8.413 3.488a11.82 11.82 0 0 1 3.48 8.414c-.003 6.563-5.377 11.936-11.94 11.936a11.95 11.95 0 0 1-6.003-1.616L.057 24zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.593 5.448 0 9.886-4.434 9.889-9.882.002-5.462-4.415-9.89-9.881-9.892-5.45 0-9.884 4.43-9.886 9.88-.001 2.136.627 3.756 1.684 5.366l-.999 3.648 3.801-.713zm11.387-5.464c-.074-.124-.272-.198-.57-.347-.297-.149-1.758-.868-2.03-.967-.272-.099-.47-.149-.667.149-.198.297-.767.967-.94 1.165-.173.198-.347.223-.644.074-.297-.149-1.255-.462-2.39-1.474-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.521.149-.174.198-.298.298-.497.099-.198.05-.372-.025-.521-.074-.149-.667-1.612-.916-2.207-.242-.579-.487-.5-.667-.51l-.57-.01c-.198 0-.52.074-.793.372s-1.04 1.016-1.04 2.479 1.065 2.876 1.213 3.074c.149.198 2.095 3.2 5.076 4.487.709.306 1.263.489 1.694.626.712.226 1.36.194 1.872.118.571-.085 1.758-.719 2.006-1.413.248-.695.248-1.29.173-1.414z"/></svg>
    </a>
    <a class="fab" style="background:#0ea5e9" href="tel:+917028115061">
      <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/></svg>
    </a>
  </div>

  <script>
    /* DATA */
    const WA_NUMBER = "917028115061";
    const products = [
      {id:1,category:"Mobiles",title:"Smartphone X1 5G (128GB)",brand:"Zenfone",price:19999,mrp:22999,desc:"Featuring AMOLED Display, 50MP Main Camera, and long-lasting 5000mAh battery.",rating:4,images:["https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?w=400","https://images.unsplash.com/photo-1598327105666-5b89351aff97?w=400"]},
      {id:2,category:"Laptops",title:"UltraBook 14 Pro",brand:"LiteNova",price:74999,mrp:89999,desc:"Ryzen 7, 16GB RAM, 512GB SSD. Ultra lightweight metal body.",rating:5,images:["https://images.unsplash.com/photo-1496181133206-80ce9b88a853?w=400"]},
      {id:3,category:"Tablets",title:"Tablet A10 Air",brand:"Tabio",price:22999,mrp:26999,desc:"2K Retina Display, Stylus Support, 10.4-inch screen.",rating:4,images:["https://images.unsplash.com/photo-1542751110-97427bbecf20?w=400"]},
      {id:4,category:"Wearables",title:"Smartwatch Series 9",brand:"Chronix",price:6999,mrp:8499,desc:"GPS, Heart Rate Monitor, 5ATM Waterproof.",rating:4,images:["https://images.unsplash.com/photo-1579586337278-3befd40fd17a?w=400"]},
      {id:5,category:"Audio",title:"Noise Cancel Headphones",brand:"SoundPeak",price:5999,mrp:7499,desc:"Hybrid Active Noise Cancellation, 40h Playback time.",rating:5,images:["https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=400"]},
      {id:6,category:"TV",title:"55‚Ä≥ 4K UHD Smart TV",brand:"ViewStar",price:45999,mrp:54999,desc:"Dolby Vision, Dolby Atmos, Slim Bezel Design.",rating:4,images:["https://images.unsplash.com/photo-1593359677879-a4bb92f829d1?w=400"]},
      {id:7,category:"Speakers",title:"Portable Bluetooth Speaker",brand:"Boomio",price:2499,mrp:3299,desc:"12H Playtime, 360-degree sound, IPX7 Water resistant.",rating:4,images:["https://images.unsplash.com/photo-1608043152269-423dbba4e7e1?w=400"]},
      {id:8,category:"Cameras",title:"Mirrorless Vlogger Kit",brand:"Photonix",price:42999,mrp:52999,desc:"24MP Sensor, 4K Video Recording, 15-45mm Lens Kit.",rating:5,images:["https://images.unsplash.com/photo-1516035069371-29a1b244cc32?w=400"]}
    ];

    let cart = JSON.parse(localStorage.getItem("cart") || "[]");
    let couponCode = localStorage.getItem("coupon") || "";
    let liveLat = localStorage.getItem("liveLat");
    let liveLng = localStorage.getItem("liveLng");

    /* HELPERS */
    const $ = (id) => document.getElementById(id);
    const fmt = (n) => Number(n).toLocaleString("en-IN");
    const starStr = (n) => Array(5).fill(0).map((_,i) => `<svg width="14" height="14" fill="${i<n?'currentColor':'#e2e8f0'}" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>`).join('');

    function saveCart(){ localStorage.setItem("cart", JSON.stringify(cart)); updateBadge(); }
    function updateBadge(){ $("cart-count").textContent = cart.reduce((a,b)=>a+b.qty,0); }
    
    /* NOTIFICATIONS */
    function toast(msg){
      const box = $("toast-box");
      const el = document.createElement("div");
      el.className = "toast";
      el.innerHTML = `<span style="color:#22c55e">‚úî</span> ${msg}`;
      box.appendChild(el);
      setTimeout(() => el.remove(), 3000);
    }

    /* RENDER */
    function init(){
      updateBadge();
      renderProducts();
      renderCart();
      // Init Pills
      document.querySelectorAll('.cat-pill').forEach(p => 
        p.addEventListener('click', () => {
          document.querySelectorAll('.cat-pill').forEach(i=>i.classList.remove('active'));
          p.classList.add('active');
          filterProducts(p.dataset.cat);
        })
      );
      // Fill address
      $("a-name").value = localStorage.getItem("a-name")||"";
      $("a-phone").value= localStorage.getItem("a-phone")||"";
      $("a-addr").value= localStorage.getItem("a-addr")||"";
    }

    function renderProducts(list=products){
      const el = $("product-list"); 
      el.innerHTML = list.length ? "" : `<div style="grid-column:1/-1;text-align:center;padding:40px;color:var(--muted)">No products match your criteria</div>`;
      list.forEach(p => {
        el.innerHTML += `
          <div class="card">
            <div style="text-align:center;cursor:pointer" onclick="viewProd(${p.id})">
              <img src="${p.images[0]}" alt="${p.title}">
            </div>
            <div class="card-body">
              <span class="badge">${p.category}</span>
              <h3 class="title" onclick="viewProd(${p.id})" style="cursor:pointer">${p.title}</h3>
              <div class="stars">${starStr(p.rating)} <span style="color:#cbd5e1;font-size:12px">(${Math.floor(Math.random()*200)} reviews)</span></div>
              <div class="price-row">
                <div>
                  <span class="curr-price">‚Çπ${fmt(p.price)}</span>
                  <span class="old-price">‚Çπ${fmt(p.mrp)}</span>
                </div>
              </div>
            </div>
            <div class="card-footer">
              <button class="btn brand" onclick="quickAdd(${p.id})">Add</button>
              <button class="btn outline" onclick="viewProd(${p.id})">View</button>
            </div>
          </div>
        `;
      });
    }

    function filterProducts(cat = "All"){
      const q = $("search").value.toLowerCase();
      const min = $("f-min").value;
      const max = $("f-max").value;

      const res = products.filter(p => {
        const matchesCat = cat==="All" || p.category===cat;
        const matchesSearch = (p.title+p.brand).toLowerCase().includes(q);
        const matchesMin = min ? p.price >= min : true;
        const matchesMax = max ? p.price <= max : true;
        return matchesCat && matchesSearch && matchesMin && matchesMax;
      });
      renderProducts(res);
    }

    function viewProd(id){
      const p = products.find(x=>x.id===id);
      if(!p) return;
      
      // Populate Product View
      $("pv-main").src = p.images[0];
      $("pv-cat").textContent = p.category;
      $("pv-title").textContent = p.title;
      $("pv-brand").textContent = p.brand;
      $("pv-price").textContent = fmt(p.price);
      $("pv-desc").textContent = p.desc;
      $("pv-stars").innerHTML = starStr(p.rating);
      
      // Reset
      $("pv-qty").value = 1;
      $("pv-add").onclick = () => { 
        addToCart(p, +$("pv-qty").value); 
        $("openCart").click();
      };
      $("pv-wa").onclick = () => waBuySingle(p, +$("pv-qty").value);

      // Thumbs
      const box = $("pv-thumbs"); box.innerHTML = "";
      p.images.forEach(src => {
        const i = document.createElement('img');
        i.src = src; i.className = "pv-thumb";
        i.onclick = () => $("pv-main").src = src;
        box.appendChild(i);
      });
      
      showSection('product-view');
      window.scrollTo({top:0,behavior:'smooth'});
    }

    function addToCart(p, qty=1){
      const ex = cart.find(x=>x.id===p.id);
      if(ex) ex.qty += qty; 
      else cart.push({...p, qty});
      saveCart(); 
      toast(`${p.title} added to cart`);
    }

    function quickAdd(id){
      const p = products.find(x=>x.id===id);
      addToCart(p,1);
    }

    /* CART RENDER */
    function renderCart(){
      const box = $("cart-items");
      if(!cart.length) {
        box.innerHTML = `<div style="text-align:center;padding:40px;color:var(--muted)">Your cart is empty.<br><a onclick="showSection('home')" style="color:var(--brand);cursor:pointer">Start shopping</a></div>`;
        updateTotals(0);
        return;
      }

      let subtotal = 0;
      box.innerHTML = cart.map((item, i) => {
        subtotal += item.price * item.qty;
        return `
          <div class="cart-item fade-in">
            <img src="${item.images[0]}" alt="prod">
            <div>
              <div style="font-weight:600">${item.title}</div>
              <div style="font-size:13px; color:var(--muted)">${item.brand}</div>
              <div style="font-weight:700; margin-top:4px">‚Çπ${fmt(item.price * item.qty)}</div>
            </div>
            <div class="qty-wrap">
              <button class="qty-btn" onclick="changeCartQty(${i}, -1)">‚àí</button>
              <span style="width:30px; text-align:center; font-size:14px">${item.qty}</span>
              <button class="qty-btn" onclick="changeCartQty(${i}, 1)">+</button>
            </div>
          </div>
        `
      }).join('');

      updateTotals(subtotal);
    }

    function changeCartQty(idx, delta){
      if(cart[idx].qty + delta <= 0){
        if(confirm("Remove this item?")) cart.splice(idx,1);
      } else {
        cart[idx].qty += delta;
      }
      saveCart(); renderCart();
    }
    
    function updateTotals(subtotal){
      const shipping = subtotal > 0 ? 199 : 0;
      const tax = Math.round(subtotal * 0.1);
      const disc = (couponCode.toUpperCase() === 'SAVE10') ? Math.round(subtotal * 0.1) : 0;
      const total = subtotal + shipping + tax - disc;

      $("b-sub").textContent = fmt(subtotal);
      $("b-ship").textContent = fmt(shipping);
      $("b-tax").textContent = fmt(tax);
      $("b-disc").textContent = fmt(disc);
      $("b-total").textContent = fmt(total);
    }
    
    $("clearCart").onclick = () => { if(confirm("Clear all items?")){ cart=[]; saveCart(); renderCart();}};
    $("applyCoupon").onclick = () => { couponCode = $("coupon").value; renderCart(); toast("Coupon Code Updated"); };

    /* ACTIONS */
    function showSection(id){
      document.querySelectorAll(".section").forEach(e=>e.classList.remove('active'));
      $(id).classList.add('active');
      window.scrollTo({top:0,behavior:'smooth'});
      if(id === 'home') renderProducts(); 
      if(id === 'cart') renderCart();
    }
    
    $("openCart").onclick = () => showSection('cart');
    
    /* LOCATION & ORDER */
    $("shareLocation").onclick = () => {
       if(!navigator.geolocation) return alert("Not supported");
       $("locPreview").value = "Fetching...";
       navigator.geolocation.getCurrentPosition(pos => {
          liveLat = pos.coords.latitude.toFixed(6);
          liveLng = pos.coords.longitude.toFixed(6);
          localStorage.setItem('liveLat', liveLat);
          localStorage.setItem('liveLng', liveLng);
          $("locPreview").value = "Location Pinned ‚úî";
          toast("Location captured");
       }, () => $("locPreview").value = "Denied / Error");
    }

    $("placeOrder").onclick = () => {
      const nm = $("a-name").value, ph = $("a-phone").value, ad = $("a-addr").value;
      if(!nm || !ph || !ad || ph.length!==10) return alert("Please fill valid Name, 10-digit Phone & Address");
      if(!cart.length) return alert("Cart empty");
      
      // Save address
      localStorage.setItem("a-name", nm);
      localStorage.setItem("a-phone", ph);
      localStorage.setItem("a-addr", ad);

      const billEle = { 
        sub:$("b-sub").innerText, ship:$("b-ship").innerText, 
        tax:$("b-tax").innerText, disc:$("b-disc").innerText, tot:$("b-total").innerText 
      };

      let msg = `*üõí NEW ORDER from ${nm}*\n------------------\n`;
      cart.forEach((c,i) => msg += `${i+1}. ${c.title} x${c.qty} ‚Äî ‚Çπ${fmt(c.price*c.qty)}\n`);
      msg += `------------------\n*Total: ‚Çπ${billEle.tot}*\n(Sub: ‚Çπ${billEle.sub}, Ship: ‚Çπ${billEle.ship})\n\nüìç *Details:*\n${nm}\n${ph}\n${ad}\n`;
      if(liveLat) msg += `\nüåç Map: https://maps.google.com/?q=${liveLat},${liveLng}`;
      
      window.open(`https://wa.me/${WA_NUMBER}?text=${encodeURIComponent(msg)}`, "_blank");
      cart = []; saveCart(); renderCart();
      showSection('home');
    };

    /* Search Triggers */
    const searchLogic = () => {
      const p = document.querySelectorAll('.cat-pill');
      p.forEach(x => x.classList.remove('active'));
      p[0].classList.add('active'); // reset pill to All
      filterProducts("All");
    }
    $("search").addEventListener('keyup', e => { if(e.key==='Enter') searchLogic(); });
    $("searchBtn").onclick = searchLogic;
    $("f-reset").onclick = () => {
       $("search").value=""; $("f-min").value=""; $("f-max").value="";
       searchLogic();
    }
    $("f-min").oninput = searchLogic; $("f-max").oninput = searchLogic;

    // Single Buy
    function waBuySingle(p, qty){
       let msg = `*üõí QUICK BUY REQUEST*\nItem: ${p.title}\nQty: ${qty}\nPrice: ‚Çπ${fmt(p.price*qty)}\n\nPlease verify stock & confirm payment link.`;
       window.open(`https://wa.me/${WA_NUMBER}?text=${encodeURIComponent(msg)}`, "_blank");
    }

    // Run
    init();
  </script>
</body>
</html>
